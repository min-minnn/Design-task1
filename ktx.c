#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <string.h>

int dep = -1, dest = -1; //?????? ?????? ??? ????
int peopleNum = 0; //?? ?¥ï? ??

typedef struct { //?? ????? ?? ??? ?????
	char name[50]; //?? ???
	int num; //?? ???
}Station;

Station stations[9] = { //?????? ????? ?? ????? ??????? ????
	{"????", 0},
	{"????", 1},
	{"?????", 2},
	{"????", 3},
	{"????", 4},
	{"???“ž", 5},
	{"?????", 6},
	{"???", 7},
	{"?¥ë?", 8}
};

typedef struct {
	int num; //??? ?¥ï?
	int general; //???? ???
	int total; //?? ???
}Fee;

Fee fees[4] = {
	{0,}, //?????? ??, ???? ???, ???? ?? ??? ????
	{0,}, //?????? ??, ???? ???, ???? ?? ??? ????
	{0,}, //?????? ??, ???? ???, ???? ?? ??? ????
	{0,} //????? ??, ???? ???, ??? ?? ??? ????
};

int is_str_same(char *str1, char *str2) { //??©ö??? ????? ?????? ?? ???
	if (str1 == NULL || str2 == NULL) //????? null??? 0 ???
		return 0;

	int len1 = strlen(str1); //????? ?? ?? ????? ????
	int len2 = strlen(str2); //??©ö??? ?? ????? ????

	if (len1 != len2) { //????? ????? 0 ???
		return 0;
	}

	for (int i = 0; i < len1; i++) {
		if (str1[i] != str2[i]) //i??¡Æ ????? ????? ???? ????? 0 ???
			return 0;
	}

	return 1; //?? ????? ??????? ?????? 1 ???
}

int generalFees[9][9] = { //???? ???? ???
	{ 0,},
	{ 8400,},
	{ 14100, 11600,},
	{ 18500, 16100, 8400,},
	{ 23700, 21200, 9600, 8400,},
	{ 43500, 41300, 29300, 24800, 19700,},
	{ 49300, 47100, 34900, 30700, 25800, 8400,},
	{ 53500, 51300, 40200, 34800, 30100, 10500, 8400,},
	{ 59800, 57700, 46500, 42200, 36200, 17100, 11000, 8400}
};

int main() {
	printf("<??¥ì? KTX ???? ??? ??? ???¥á??>\n\n");
	cost(); //cost ??? ???
	return 0;
}

int cost() {
	for (int i = 1; i < 9; i++) {
		for (int j = 0; j < i; j++) {
			generalFees[j][i] = generalFees[i][j];
		}
	}

	personnelData(); //?¥ï????? ??? ???
	system("cls"); //???? ??????
	route(); //?????? ?????? ??? ???

	fees[0].general = generalFees[dep][dest] * 0.25; //???? ???? ??? = ???? ????? 75% ????
	fees[1].general = generalFees[dep][dest] * 0.5; //???? ???? ??? = ???? ????? 50% ????
	fees[2].general = generalFees[dep][dest]; //???? ???? ???
	fees[3].general = generalFees[dep][dest] * 0.7; //??? ???? ??? = ???? ????? 30% ????

	for (int i = 0; i < 4; i++) {
		if ((fees[i].general % 10) != 0) { //???? ??? ???? ??? ???? ?????? 0???? ???
			fees[i].general -= fees[i].general % 10;
		}

		if ((fees[i].general % 100) != 0) { //???? ??? ???? ??? ?????? ??©ª?
			if ((fees[i].general % 100) >= 5) {
				fees[i].general = (fees[i].general + 50) / 100 * 100; //???? ??? ????? 5?????? 50 ?????? ?? 100???? ????????? ???? ????? ???? ??? ???????, ??? ??? 100 ??????
			}
			else {
				fees[i].general -= fees[i].general % 100; //???? ??? ?? 5?????? ????
			}
		}
	}

	system("cls"); //???? ??????

	printf("\n[ ??¥ì? KTX ???? ????(1?? ????) ]\n");
	printf("\n\t????\t\t%6d\n", fees[0].general);
	printf("\n\t????\t\t%6d\n", fees[1].general);
	printf("\n\t??\t\t%6d\n", fees[2].general);
	printf("\n\t???\t\t%6d\n\n\n", fees[3].general);

	generalTotal();
	
	return 0;
}

int personnelData() {  
	while (1) {
		printf("?????? ???? ???????.(?? 6?? ???, ????? ?????): ");
		scanf("%d", &fees[0].num);
		printf("?????? ???? ????????.(?? 6?? ??? ~ 13?? ???): ");
		scanf("%d", &fees[1].num);
		printf("???? ???? ????????.: ");
		scanf("%d", &fees[2].num);
		printf("?????? ???? ????????.(?? 65?? ???): ");
		scanf("%d", &fees[3].num);

		for (int i = 0; i < 4; i++) { //????, ????, ??, ?????? ?? ??? ??????
			peopleNum += fees[i].num;
		}

		if (peopleNum > 9) { //??? 9?????? ?????? ???? ????
			printf("?????? ?????? 9????? ????????. ?¥ï??? ??????????.\n\n");
			peopleNum = 0; //0???? ??? ????
			personnelData(); //??? ??? ???
		}
		else {
			if ((fees[0].num > 0 && fees[2].num == 0) && (fees[0].num > 0 && fees[3].num == 0)) { //????? ??????? ????? ?????? ??? ?????
				printf("????? ???? ?????? ??? ???????? ????.\n\n");
				personnelData(); //??? ??? ???
			}
		}
		break;
	}
	return 0;
}

int route() { //??? ??? ???
	printf("----------------------------------------------------------------------------\n");
	printf("??????: ???? - ???? - ????? - ???? - ???? - ???“ž - ????? - ??? - ?¥ë?\n");
	printf("----------------------------------------------------------------------------\n");

	startStation(); //???? ??? ??? ???
	arrivalStation(); //?????? ??? ??? ???
	
	return 0;
}

int startStation() { //???? ??? ???
	char start[100]; //???? ??? ?ò÷

	printf("?????? ????????.: ");
	scanf("%s", start); //???? ??? ???

	for (int i = 0; i < 9; i++) { //i?? ?? ???
		if (is_str_same(stations[i].name, start)) { //????? ???? ?????? ?? ??????? i?? dep?? ?????
			dep = i;
			return 0;
		}
	}

	if (dep == -1) {
		printf("????? ???????? ??????. ");
		startStation(); //??? ??? ???
	}

	return 0;
}

int arrivalStation() {
	char arrival[100]; //?????? ??? ?ò÷

	printf("???????? ????????.: ");
	scanf("%s", arrival); //?????? ??? ???

	for (int i = 0; i < 9; i++) { //i?? ?? ????? ????
		if (is_str_same(stations[i].name, arrival)) { //????? ???? ?????? ?? ??????? i?? dest?? ?????
			dest = i;
			return 0;
		}
	}

	if(dest == -1) {
		printf("????? ???????? ??????. ");
		arrivalStation(); //??? ??? ???
	}

	if (dep == dest) { //dep?? dest?? ??????? ?????? ?????? ????(?? ??? ????)
		printf("?????? ???????? ????????. ");
		arrivalStation(); //??? ??? ???
	}

	return 0;
}

int generalTotal() {
	int total = 0; //?? ??? ?????? ????

	for (int i = 0; i < 4; i++) {
		fees[i].total = fees[i].general * fees[i].num; //????»× ???? ?????? ??? ???? ??? ???? ?¥ï? ???? ????? ?? ???? ?????
		total += fees[i].total; //????? ?? ??? ????? ?? ???? ??? ????
	}

	printf("\n????: %s??\n", stations[dep].name);
	printf("??????: %s??\n", stations[dest].name);
	printf("??????: %d??\n", peopleNum);
	printf("?? ???????: %d??\n", total);

	return 0;
}